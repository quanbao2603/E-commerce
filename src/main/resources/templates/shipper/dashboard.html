<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{shipper/layout}">
<head>
<title>Dashboard - Shipper Panel</title>
<!-- ƒë∆∞a CSS ri√™ng ·ªü child n·∫øu mu·ªën -->
<link rel="stylesheet" href="/css/shipper/dashboard.css">
</head>
<body>
	<h1 layout:fragment="page-title">Dashboard</h1>

	<div layout:fragment="content">
		<!-- Welcome Section -->
		<div class="mb-4">
			<h2>
				Xin ch√†o, <span
					th:text="${currentUser != null ? currentUser.username : 'Shipper'}">Shipper</span>!
				üöö
			</h2>
			<p class="text-muted">Qu·∫£n l√Ω ƒë∆°n ƒë∆∞·ª£c ph√¢n c√¥ng v√† theo d√µi hi·ªáu
				su·∫•t giao h√†ng.</p>
		</div>

		<!-- Statistics Cards -->
		<div class="row g-4 mb-4">
			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #3b82f6, #60a5fa); color: white;">
						<i class="fas fa-user-check"></i>
					</div>
					<div class="stat-value" th:text="${assignedCount}">0</div>
					<div class="stat-label">ƒê∆∞·ª£c Ph√¢n C√¥ng</div>
				</div>
			</div>

			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #10b981, #34d399); color: white;">
						<i class="fas fa-truck-fast"></i>
					</div>
					<div class="stat-value" th:text="${inTransitCount}">0</div>
					<div class="stat-label">ƒêang Giao</div>
				</div>
			</div>

			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #7c3aed, #a78bfa); color: white;">
						<i class="fas fa-circle-check"></i>
					</div>
					<div class="stat-value" th:text="${deliveredCount}">0</div>
					<div class="stat-label">Giao Th√†nh C√¥ng</div>
				</div>
			</div>

			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">
						<i class="fas fa-triangle-exclamation"></i>
					</div>
					<div class="stat-value" th:text="${failedCount}">0</div>
					<div class="stat-label">Th·∫•t B·∫°i</div>
				</div>
			</div>

			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #f59e0b, #fbbf24); color: white;">
						<i class="fas fa-money-bill-wave"></i>
					</div>
					<div class="stat-value"
						th:text="${#numbers.formatDecimal(codToCollect, 0, 'COMMA', 0, 'POINT')}">0</div>
					<div class="stat-label">COD C·∫ßn Thu (‚Ç´)</div>
				</div>
			</div>

			<div class="col-md-3">
				<div class="stat-card">
					<div class="stat-icon"
						style="background: linear-gradient(135deg, #0ea5e9, #38bdf8); color: white;">
						<i class="fas fa-sack-dollar"></i>
					</div>
					<div class="stat-value"
						th:text="${#numbers.formatDecimal(codCollected, 0, 'COMMA', 0, 'POINT')}">0</div>
					<div class="stat-label">COD ƒê√£ Thu (‚Ç´)</div>
				</div>
			</div>
		</div>

		<!-- Quick Actions -->
		<div class="row g-4 mb-4">
			<div class="col-md-12">
				<div class="admin-table">
					<div class="table-header">
						<h5 class="mb-0">
							<i class="fas fa-bolt me-2"></i> Thao T√°c Nhanh
						</h5>
					</div>
					<div class="p-4">
						<div class="row g-3">
							<div class="col-md-3">
								<a href="/shipper/deliveries" class="btn btn-primary w-100">
									<i class="fas fa-list-check me-2"></i>Danh S√°ch ƒê∆°n ƒê∆∞·ª£c Giao
								</a>
							</div>
							<div class="col-md-3">
								<a href="/shipper/stats" class="btn btn-outline-primary w-100">
									<i class="fas fa-chart-line me-2"></i>Th·ªëng K√™ C√° Nh√¢n
								</a>
							</div>
							<div class="col-md-3">
								<a href="/shipper/help" class="btn btn-outline-primary w-100">
									<i class="fas fa-circle-info me-2"></i>H∆∞·ªõng D·∫´n Nhanh
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Recent Deliveries -->
		<div class="row g-4 mb-4">
			<div class="col-md-12">
				<div class="admin-table">
					<div
						class="table-header d-flex justify-content-between align-items-center">
						<h5 class="mb-0">
							<i class="fas fa-clock me-2"></i> ƒê∆°n Giao G·∫ßn ƒê√¢y
						</h5>
						<a href="/shipper/deliveries"
							class="btn btn-sm btn-outline-primary">Xem T·∫•t C·∫£ <i
							class="fas fa-arrow-right ms-1"></i></a>
					</div>

					<div class="table-responsive">
						<table class="table mb-0">
							<thead>
								<tr>
									<th>M√£ Giao</th>
									<th>M√£ ƒê∆°n</th>
									<th>Kh√°ch H√†ng</th>
									<th>Tr·∫°ng Th√°i</th>
									<th>Ph√¢n C√¥ng</th>
									<th>Thao T√°c</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="delivery : ${recentDeliveries}">
									<td><strong th:text="${delivery.id}">DEL-ID</strong></td>
									<td th:text="${delivery.orderId}">ORD-ID</td>
									<td>
										<div th:text="${delivery.customerName}">T√™n KH</div> <small
										class="text-muted" th:text="${delivery.customerPhone}">SƒêT</small>
									</td>
									<td><span class="badge"
										th:classappend="${delivery.status == 'DELIVERED' ? 'bg-success' :
                                           (delivery.status == 'FAILED' ? 'bg-danger' :
                                           (delivery.status == 'IN_TRANSIT' ? 'bg-warning' : 'bg-primary'))}"
										th:text="${delivery.status}">STATUS</span></td>
									<td><small
										th:text="${#temporals.format(delivery.assignedAt, 'dd/MM/yyyy HH:mm')}">Date</small></td>
									<td><a
										th:href="@{/shipper/deliveries/{id}(id=${delivery.id})}"
										class="btn btn-sm btn-outline-primary"> <i
											class="fas fa-eye"></i> Xem
									</a></td>
								</tr>

								<tr
									th:if="${recentDeliveries == null or #lists.isEmpty(recentDeliveries)}">
									<td colspan="6" class="text-center py-5"><i
										class="fas fa-truck-moving fa-3x text-muted mb-3"></i>
										<p class="text-muted">Ch∆∞a c√≥ ƒë∆°n giao n√†o</p></td>
								</tr>
							</tbody>
						</table>
					</div>

				</div>
			</div>
		</div>

	</div>
</body>
</html>
