<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Pagination Fragment</title>
</head>
<body>
    <!-- Pagination Fragment -->
    <div th:fragment="pagination(page, url)">
        <div th:if="${page.totalPages > 1}" class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
            <!-- Page Info -->
            <div class="text-muted small">
                Hiển thị 
                <strong th:text="${page.numberOfElements}">0</strong> 
                trong tổng số 
                <strong th:text="${page.totalElements}">0</strong> 
                kết quả
            </div>
            
            <!-- Pagination Controls -->
            <nav aria-label="Page navigation">
                <ul class="pagination mb-0">
                    <!-- First Page -->
                    <li class="page-item" th:classappend="${page.first ? 'disabled' : ''}">
                        <a class="page-link" 
                           th:href="${page.first ? '#' : url + '?page=0&size=' + page.size}"
                           aria-label="First">
                            <i class="fas fa-angle-double-left"></i>
                        </a>
                    </li>
                    
                    <!-- Previous Page -->
                    <li class="page-item" th:classappend="${page.first ? 'disabled' : ''}">
                        <a class="page-link" 
                           th:href="${page.first ? '#' : url + '?page=' + (page.number - 1) + '&size=' + page.size}"
                           aria-label="Previous">
                            <i class="fas fa-angle-left"></i>
                        </a>
                    </li>
                    
                    <!-- Page Numbers -->
                    <li th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
                        th:if="${i >= (page.number - 2 < 0 ? 0 : page.number - 2) && i <= (page.number + 2 >= page.totalPages ? page.totalPages - 1 : page.number + 2)}"
                        class="page-item"
                        th:classappend="${i == page.number ? 'active' : ''}">
                        <a class="page-link" 
                           th:href="@{${url}(page=${i}, size=${page.size})}"
                           th:text="${i + 1}">1</a>
                    </li>
                    
                    <!-- Next Page -->
                    <li class="page-item" th:classappend="${page.last ? 'disabled' : ''}">
                        <a class="page-link" 
                           th:href="${page.last ? '#' : url + '?page=' + (page.number + 1) + '&size=' + page.size}"
                           aria-label="Next">
                            <i class="fas fa-angle-right"></i>
                        </a>
                    </li>
                    
                    <!-- Last Page -->
                    <li class="page-item" th:classappend="${page.last ? 'disabled' : ''}">
                        <a class="page-link" 
                           th:href="${page.last ? '#' : url + '?page=' + (page.totalPages - 1) + '&size=' + page.size}"
                           aria-label="Last">
                            <i class="fas fa-angle-double-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- Page Size Selector -->
            <div class="d-flex align-items-center gap-2">
                <label class="small text-muted mb-0">Hiển thị:</label>
                <select class="form-select form-select-sm" 
                        style="width: auto;"
                        onchange="window.location.href = this.value">
                    <option th:each="size : ${new int[]{10, 20, 50, 100}}"
                            th:value="@{${url}(page=0, size=${size})}"
                            th:text="${size}"
                            th:selected="${size == page.size}">10</option>
                </select>
            </div>
        </div>
    </div>
</body>
</html>
